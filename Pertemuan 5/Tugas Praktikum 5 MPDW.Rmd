---
title: "MPDW TUGAS 5"
author: "Nur Aulina"
date: "2025-10-01"
output: html_document
---

```{r}
library(rio)
library(tsibble)
library(ggplot2)
library(tseries)
library(forecast)
```

```{r}
dataa <- import("https://github.com/kamaldims/MPDW/raw/main/Kurs%20Jual%20Rataan%20USD%20Fix.xlsx")

# Asumsikan kolom ke-2 adalah nilai kurs
kurs <- ts(dataa[[2]])

head(kurs)
```

```{r}
kurs |> as_tsibble() |> 
  ggplot(aes(x = index, y = value)) + 
  geom_line(color="blue") + 
  theme_bw() +
  xlab("Observasi") + ylab("Kurs USD") +
  ggtitle("Plot Deret Waktu Kurs USD")
```
```{r}
lattice::densityplot(as.vector(kurs))
```
Plot density di atas menunjukkan bahwa distribusi data kurs tidak berbentuk normal sempurna, melainkan multimodal dengan beberapa puncak kepadatan (sekitar 13.500, 14.000, dan 15.500). Hal ini mengindikasikan adanya beberapa periode nilai kurs yang sering muncul. Sebaran data relatif simetris di sekitar kisaran 14.000–15.000, sehingga dapat dikatakan ragamnya cukup stabil. Namun, karena pola distribusinya tidak tunggal, kemungkinan terdapat pengaruh faktor eksternal atau perubahan tren dalam periode tertentu.

### Plot ACF
```{r}
acf(kurs, main="Autocorrelation Function (ACF) Kurs USD")
```
Berdasarkan plot ACF, terlihat bahwa nilai autokorelasi pada data kurs USD menurun secara perlahan (tails off) dan masih signifikan hingga lag yang cukup panjang. Hal ini menunjukkan adanya pola ketergantungan jangka panjang dalam data, yang mengindikasikan bahwa data belum stasioner.

### Uji ADF

```{r}
tseries::adf.test(kurs)
```
$H_0$ : Data tidak stasioner dalam rataan

$H_1$ : Data stasioner dalam rataan

Berdasarkan uji ADF tersebut, didapat p-value sebesar 0.0209 yang lebih kecil dari taraf nyata 5% sehingga $H_0$ ditolak. Dengan demikian, dapat disimpulkan bahwa data stasioner dalam rataan.

### Plot Box-Cox

```{r}
# Model linear
model <- lm(kurs ~ seq_along(kurs))

# Box-Cox Transformation
bc <- boxcox(model, lambda = seq(-1, 4, 0.01))

# Nilai lambda optimal
lambda_opt <- bc$x[which.max(bc$y)]
cat("Lambda optimal:", lambda_opt, "\n")

# Rentang lambda dalam CI 95%
lambda_ci <- range(bc$x[bc$y > max(bc$y) - 1/2 * qchisq(.95, 1)])
cat("Rentang lambda (95% CI):", lambda_ci, "\n")
```
Gambar di atas menunjukkan nilai rounded value ($\lambda$) optimum sebesar –1,00 dan pada selang kepercayaan 95% nilai memiliki batas bawah –1,00 dan batas atas –0,76. Selang tersebut tidak memuat nilai satu, sehingga dapat dikatakan bahwa data bangkitan belum stasioner dalam ragam dan perlu dilakukan transformasi Box-Cox dengan $\lambda = –1$.

### Transformasi data agar stasioner dalam ragam
```{r}
kurs_trans <- 1/kurs  # karena λ = -1 dari hasil Box-Cox
```

### Plot sebelum dan sesudah transformasi
```{r}
par(mfrow=c(1,2))
plot(kurs, type="l", main="Data Asli Kurs USD", ylab="Kurs")
plot(kurs_trans, type="l", main="Data Transformasi (1/kurs)", ylab="1/Kurs")
```

###  Uji stasioneritas rataan setelah transformasi
```{r}
adf.test(kurs_trans)
```
Berdasarkan hasil Augmented Dickey-Fuller (ADF) test pada data yang telah ditransformasi menggunakan Box-Cox dengan $\lambda = -1$ (transformasi kebalikan $1/x$), diperoleh nilai statistik uji sebesar –3,85 dengan p-value 0,016 yang lebih kecil dari taraf nyata 5%. Hal ini menunjukkan bahwa hipotesis nol (data tidak stasioner dalam rataan) ditolak, sehingga dapat disimpulkan bahwa data hasil transformasi sudah stasioner dalam rataan.
